{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/dasein/dev/explore_new/django-nextjs-realtime/frontend/components/auth/signup.tsx\";\nimport { useRouter } from \"next/router\";\nimport { useRef, useState, useEffect } from \"react\";\nimport Head from \"next/head\";\nimport styles from \"../../styles/login.module.scss\";\nimport CustomButton from \"../buttons/button\";\nimport { signUpApiCall } from \"../../service/auth\";\nimport { getCookie } from \"../../service/cookie\";\n\nconst SignUp = () => {\n  const router = useRouter();\n  const {\n    0: errors,\n    1: setErrors\n  } = useState({\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\"\n  });\n\n  const is_admin = () => {\n    const access_token = getCookie(\"access_token\");\n\n    if (access_token) {\n      router.push(\"/sensors\");\n    }\n  };\n\n  useEffect(() => {\n    is_admin();\n  }, []);\n  const {\n    0: usernameError,\n    1: setUserameError\n  } = useState(true);\n  const {\n    0: emailError,\n    1: setEmailError\n  } = useState(true);\n  const {\n    0: passwordError,\n    1: setPasswordError\n  } = useState(true);\n  const {\n    0: confirmPasswordError,\n    1: setConfirmPasswordError\n  } = useState(true);\n  const {\n    0: firstNameError,\n    1: setFirstNameError\n  } = useState(true);\n  const {\n    0: lastNameError,\n    1: setLastNameError\n  } = useState(true);\n  const {\n    0: passwordValue,\n    1: setPasswordValue\n  } = useState(\"\");\n  const {\n    0: confirmPasswordValue,\n    1: setConfirmPasswordValue\n  } = useState(\"\");\n  const formRef = useRef(null);\n  const {\n    0: signUpError,\n    1: setSignUpError\n  } = useState(null);\n\n  const formHandler = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    let tempErrors = errors;\n\n    switch (name) {\n      case \"username\":\n        tempErrors.username = value.length < 4 ? \"Username is not valid\" : \"\";\n        setUserameError(tempErrors.username.length > 0 ? true : false);\n        break;\n\n      case \"email\":\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        tempErrors.email = re.test(value) ? \"\" : \"Email is not valid\";\n        setEmailError(tempErrors.email.length > 0 ? true : false);\n        break;\n\n      case \"password1\":\n        setPasswordValue(value.replace(/\\s/g, \"\"));\n        tempErrors.password = value.length < 8 ? \"Password must be at least 8 characters\" : \"\";\n        setPasswordError(tempErrors.password.length > 0 ? true : false);\n        tempErrors.confirmPassword = confirmPasswordValue === value ? \"\" : \"Passwords do not match\";\n        setConfirmPasswordError(tempErrors.confirmPassword.length > 0 ? true : false);\n        break;\n\n      case \"password2\":\n        setConfirmPasswordValue(value.replace(/\\s/g, \"\"));\n        tempErrors.confirmPassword = value === passwordValue ? \"\" : \"Passwords do not match\";\n        setConfirmPasswordError(tempErrors.confirmPassword.length > 0 ? true : false);\n        break;\n\n      case \"first_name\":\n        tempErrors.first_name = value.length < 1 ? \"Please enter your first name\" : \"\";\n        setFirstNameError(tempErrors.first_name.length > 0 ? true : false);\n        break;\n\n      case \"last_name\":\n        tempErrors.last_name = value.length < 1 ? \"Please enter your last name\" : \"\";\n        setLastNameError(tempErrors.last_name.length > 0 ? true : false);\n        break;\n\n      default:\n        break;\n    }\n\n    setErrors(tempErrors);\n  };\n\n  const sendRegister = async event => {\n    event.preventDefault();\n    setSignUpError(null);\n    const formData = new FormData(formRef.current);\n    const userData = Object.fromEntries(formData);\n    const res = await signUpApiCall(userData);\n\n    if (res.error) {\n      console.log(res.error);\n      setSignUpError(res.error);\n    } else if (res.user) {\n      router.push(\"/sensors\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"SignUp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.svg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.login_card_container,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: styles.login_header,\n        children: \"SignUp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.form_container,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: styles.login_form,\n          ref: formRef,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.first_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"first_name\",\n            type: \"text\",\n            className: styles.text_input,\n            placeholder: \"First Name\",\n            onChange: formHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.last_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"last_name\",\n            type: \"text\",\n            className: styles.text_input,\n            placeholder: \"First Name\",\n            onChange: formHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"username\",\n            type: \"text\",\n            className: styles.text_input,\n            placeholder: \"Username\",\n            onChange: formHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.input_container,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"email\",\n              type: \"email\",\n              className: styles.text_input,\n              placeholder: \"Email\",\n              onChange: formHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.input_container,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"password1\",\n              type: \"password\",\n              value: passwordValue,\n              className: styles.text_input,\n              placeholder: \"Password\",\n              onChange: formHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \" Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.confirmPassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.input_container,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"password2\",\n              type: \"password\",\n              value: confirmPasswordValue,\n              className: styles.text_input,\n              placeholder: \"Password\",\n              onChange: formHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CustomButton, {\n            fill: true,\n            clickAction: event => sendRegister(event),\n            disabled: usernameError || emailError || passwordError || confirmPasswordError || firstNameError || lastNameError,\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), signUpError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.auth_form_error,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\" \", signUpError, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n\nexport default SignUp;","map":{"version":3,"sources":["/home/dasein/dev/explore_new/django-nextjs-realtime/frontend/components/auth/signup.tsx"],"names":["useRouter","useRef","useState","useEffect","Head","styles","CustomButton","signUpApiCall","getCookie","SignUp","router","errors","setErrors","username","password","confirmPassword","first_name","last_name","email","is_admin","access_token","push","usernameError","setUserameError","emailError","setEmailError","passwordError","setPasswordError","confirmPasswordError","setConfirmPasswordError","firstNameError","setFirstNameError","lastNameError","setLastNameError","passwordValue","setPasswordValue","confirmPasswordValue","setConfirmPasswordValue","formRef","signUpError","setSignUpError","formHandler","event","name","value","target","tempErrors","length","re","test","replace","sendRegister","preventDefault","formData","FormData","current","userData","Object","fromEntries","res","error","console","log","user","login_card_container","login_header","form_container","login_form","contact_form_error","text_input","input_container","auth_form_error"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useRef, useState, useEffect } from \"react\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport styles from \"../../styles/login.module.scss\";\nimport CustomButton from \"../buttons/button\";\nimport { signUpApiCall } from \"../../service/auth\";\nimport { getCookie } from \"../../service/cookie\";\nimport { RegisterUser } from \"../../models/types\";\n\nconst SignUp: React.SFC<{}> = () => {\n  const router = useRouter();\n  const [errors, setErrors] = useState({\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n  });\n\n  const is_admin = () => {\n    const access_token = getCookie(\"access_token\");\n\n    if (access_token) {\n      router.push(\"/sensors\");\n    }\n  };\n\n  useEffect(() => {\n    is_admin();\n  }, []);\n\n  const [usernameError, setUserameError] = useState(true);\n  const [emailError, setEmailError] = useState(true);\n  const [passwordError, setPasswordError] = useState(true);\n  const [confirmPasswordError, setConfirmPasswordError] = useState(true);\n  const [firstNameError, setFirstNameError] = useState(true);\n  const [lastNameError, setLastNameError] = useState(true);\n\n  const [passwordValue, setPasswordValue] = useState(\"\");\n  const [confirmPasswordValue, setConfirmPasswordValue] = useState(\"\");\n\n  const formRef = useRef(null);\n  const [signUpError, setSignUpError] = useState(null);\n\n  const formHandler = (event) => {\n    const { name, value } = event.target;\n    let tempErrors = errors;\n    switch (name) {\n      case \"username\":\n        tempErrors.username = value.length < 4 ? \"Username is not valid\" : \"\";\n        setUserameError(tempErrors.username.length > 0 ? true : false);\n        break;\n      case \"email\":\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        tempErrors.email = re.test(value) ? \"\" : \"Email is not valid\";\n        setEmailError(tempErrors.email.length > 0 ? true : false);\n        break;\n      case \"password1\":\n        setPasswordValue(value.replace(/\\s/g, \"\"));\n        tempErrors.password =\n          value.length < 8 ? \"Password must be at least 8 characters\" : \"\";\n        setPasswordError(tempErrors.password.length > 0 ? true : false);\n        tempErrors.confirmPassword =\n          confirmPasswordValue === value ? \"\" : \"Passwords do not match\";\n        setConfirmPasswordError(\n          tempErrors.confirmPassword.length > 0 ? true : false\n        );\n        break;\n      case \"password2\":\n        setConfirmPasswordValue(value.replace(/\\s/g, \"\"));\n        tempErrors.confirmPassword =\n          value === passwordValue ? \"\" : \"Passwords do not match\";\n        setConfirmPasswordError(\n          tempErrors.confirmPassword.length > 0 ? true : false\n        );\n        break;\n      case \"first_name\":\n        tempErrors.first_name =\n          value.length < 1 ? \"Please enter your first name\" : \"\";\n        setFirstNameError(tempErrors.first_name.length > 0 ? true : false);\n        break;\n      case \"last_name\":\n        tempErrors.last_name =\n          value.length < 1 ? \"Please enter your last name\" : \"\";\n        setLastNameError(tempErrors.last_name.length > 0 ? true : false);\n        break;\n\n      default:\n        break;\n    }\n    setErrors(tempErrors);\n  };\n\n  const sendRegister = async (event) => {\n    event.preventDefault();\n    setSignUpError(null);\n    const formData = new FormData(formRef.current) as any;\n    const userData = Object.fromEntries(formData) as RegisterUser;\n\n    const res = await signUpApiCall(userData);\n\n    if (res.error) {\n      console.log(res.error);\n      setSignUpError(res.error);\n    } else if (res.user) {\n      router.push(\"/sensors\");\n    }\n  };\n  return (\n    <div>\n      <Head>\n        <title>SignUp</title>\n        <link rel=\"icon\" href=\"/favicon.svg\" />\n      </Head>\n\n      <div className={styles.login_card_container}>\n        <h2 className={styles.login_header}>SignUp</h2>\n\n        <div className={styles.form_container}>\n          <form className={styles.login_form} ref={formRef}>\n            {/* first name*/}\n            <label>First Name</label>\n            <br />\n            <span className={styles.contact_form_error}>\n              {errors.first_name}\n            </span>\n            <input\n              name=\"first_name\"\n              type=\"text\"\n              className={styles.text_input}\n              placeholder=\"First Name\"\n              onChange={formHandler}\n            />\n\n            {/*last name*/}\n            <label>Last Name</label>\n            <br />\n            <span className={styles.contact_form_error}>\n              {errors.last_name}\n            </span>\n            <input\n              name=\"last_name\"\n              type=\"text\"\n              className={styles.text_input}\n              placeholder=\"First Name\"\n              onChange={formHandler}\n            />\n\n            <label>Username</label>\n            <br />\n            <span className={styles.contact_form_error}>{errors.username}</span>\n            <input\n              name=\"username\"\n              type=\"text\"\n              className={styles.text_input}\n              placeholder=\"Username\"\n              onChange={formHandler}\n            />\n\n            {/*email*/}\n            <label>Email</label>\n            <br />\n            <span className={styles.contact_form_error}>{errors.email}</span>\n            <div className={styles.input_container}>\n              <input\n                name=\"email\"\n                type=\"email\"\n                className={styles.text_input}\n                placeholder=\"Email\"\n                onChange={formHandler}\n              />\n            </div>\n\n            {/*password*/}\n            <label>Password</label>\n            <br />\n            <span className={styles.contact_form_error}>{errors.password}</span>\n            <div className={styles.input_container}>\n              <input\n                name=\"password1\"\n                type=\"password\"\n                value={passwordValue}\n                className={styles.text_input}\n                placeholder=\"Password\"\n                onChange={formHandler}\n              />\n            </div>\n\n            {/*confirmpassword*/}\n            <label> Confirm Password</label>\n            <br />\n            <span className={styles.contact_form_error}>\n              {errors.confirmPassword}\n            </span>\n            <div className={styles.input_container}>\n              <input\n                name=\"password2\"\n                type=\"password\"\n                value={confirmPasswordValue}\n                className={styles.text_input}\n                placeholder=\"Password\"\n                onChange={formHandler}\n              />\n            </div>\n\n            <CustomButton\n              fill={true}\n              clickAction={(event) => sendRegister(event)}\n              disabled={\n                usernameError ||\n                emailError ||\n                passwordError ||\n                confirmPasswordError ||\n                firstNameError ||\n                lastNameError\n              }\n            >\n              Sign up\n            </CustomButton>\n\n            {signUpError && (\n              <div className={styles.auth_form_error}>\n                <span> {signUpError} </span>\n              </div>\n            )}\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}