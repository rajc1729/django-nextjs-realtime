{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/dasein/dev/explore_new/django-nextjs-realtime/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/dasein/dev/explore_new/django-nextjs-realtime/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/dasein/dev/explore_new/django-nextjs-realtime/frontend/components/auth/signup.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useRouter } from \"next/router\";\nimport { useRef, useState, useEffect } from \"react\";\nimport Head from \"next/head\";\nimport styles from \"../../styles/login.module.scss\";\nimport CustomButton from \"../buttons/button\";\nimport { signUpApiCall } from \"../../service/auth\";\nimport { getCookie } from \"../../service/cookie\";\n\nvar SignUp = function SignUp() {\n  _s();\n\n  var router = useRouter();\n\n  var _useState = useState({\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\"\n  }),\n      errors = _useState[0],\n      setErrors = _useState[1];\n\n  var is_admin = function is_admin() {\n    var access_token = getCookie(\"access_token\");\n\n    if (access_token) {\n      router.push(\"/sensors\");\n    }\n  };\n\n  useEffect(function () {\n    is_admin();\n  }, []);\n\n  var _useState2 = useState(true),\n      usernameError = _useState2[0],\n      setUserameError = _useState2[1];\n\n  var _useState3 = useState(true),\n      emailError = _useState3[0],\n      setEmailError = _useState3[1];\n\n  var _useState4 = useState(true),\n      passwordError = _useState4[0],\n      setPasswordError = _useState4[1];\n\n  var _useState5 = useState(true),\n      confirmPasswordError = _useState5[0],\n      setConfirmPasswordError = _useState5[1];\n\n  var _useState6 = useState(true),\n      firstNameError = _useState6[0],\n      setFirstNameError = _useState6[1];\n\n  var _useState7 = useState(true),\n      lastNameError = _useState7[0],\n      setLastNameError = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      passwordValue = _useState8[0],\n      setPasswordValue = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      confirmPasswordValue = _useState9[0],\n      setConfirmPasswordValue = _useState9[1];\n\n  var formRef = useRef(null);\n\n  var _useState10 = useState(null),\n      signUpError = _useState10[0],\n      setSignUpError = _useState10[1];\n\n  var formHandler = function formHandler(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n    var tempErrors = errors;\n\n    switch (name) {\n      case \"username\":\n        tempErrors.username = value.length < 4 ? \"Username is not valid\" : \"\";\n        setUserameError(tempErrors.username.length > 0 ? true : false);\n        break;\n\n      case \"email\":\n        var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        tempErrors.email = re.test(value) ? \"\" : \"Email is not valid\";\n        setEmailError(tempErrors.email.length > 0 ? true : false);\n        break;\n\n      case \"password1\":\n        setPasswordValue(value.replace(/\\s/g, \"\"));\n        tempErrors.password = value.length < 8 ? \"Password must be at least 8 characters\" : \"\";\n        setPasswordError(tempErrors.password.length > 0 ? true : false);\n        tempErrors.confirmPassword = confirmPasswordValue === value ? \"\" : \"Passwords do not match\";\n        setConfirmPasswordError(tempErrors.confirmPassword.length > 0 ? true : false);\n        break;\n\n      case \"password2\":\n        setConfirmPasswordValue(value.replace(/\\s/g, \"\"));\n        tempErrors.confirmPassword = value === passwordValue ? \"\" : \"Passwords do not match\";\n        setConfirmPasswordError(tempErrors.confirmPassword.length > 0 ? true : false);\n        break;\n\n      case \"first_name\":\n        tempErrors.first_name = value.length < 1 ? \"Please enter your first name\" : \"\";\n        setFirstNameError(tempErrors.first_name.length > 0 ? true : false);\n        break;\n\n      case \"last_name\":\n        tempErrors.last_name = value.length < 1 ? \"Please enter your last name\" : \"\";\n        setLastNameError(tempErrors.last_name.length > 0 ? true : false);\n        break;\n\n      default:\n        break;\n    }\n\n    setErrors(tempErrors);\n  };\n\n  var sendRegister = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var formData, userData, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              setSignUpError(null);\n              formData = new FormData(formRef.current);\n              userData = Object.fromEntries(formData);\n              _context.next = 6;\n              return signUpApiCall(userData);\n\n            case 6:\n              res = _context.sent;\n\n              if (res.error) {\n                console.log(res.error);\n                setSignUpError(res.error);\n              } else if (res.user) {\n                router.push(\"/sensors\");\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function sendRegister(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"SignUp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.svg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.login_card_container,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: styles.login_header,\n        children: \"SignUp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.form_container,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: styles.login_form,\n          ref: formRef,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.first_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"first_name\",\n            type: \"text\",\n            className: styles.text_input,\n            placeholder: \"First Name\",\n            onChange: formHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.last_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"last_name\",\n            type: \"text\",\n            className: styles.text_input,\n            placeholder: \"First Name\",\n            onChange: formHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"username\",\n            type: \"text\",\n            className: styles.text_input,\n            placeholder: \"Username\",\n            onChange: formHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.input_container,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"email\",\n              type: \"email\",\n              className: styles.text_input,\n              placeholder: \"Email\",\n              onChange: formHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.input_container,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"password1\",\n              type: \"password\",\n              value: passwordValue,\n              className: styles.text_input,\n              placeholder: \"Password\",\n              onChange: formHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \" Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.contact_form_error,\n            children: errors.confirmPassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.input_container,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"password2\",\n              type: \"password\",\n              value: confirmPasswordValue,\n              className: styles.text_input,\n              placeholder: \"Password\",\n              onChange: formHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(CustomButton, {\n            fill: true,\n            clickAction: function clickAction(event) {\n              return sendRegister(event);\n            },\n            disabled: usernameError || emailError || passwordError || confirmPasswordError || firstNameError || lastNameError,\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, _this), signUpError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.auth_form_error,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\" \", signUpError, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(SignUp, \"AKmLBm7DjOX5y55qWp2vUJ6eKWA=\", false, function () {\n  return [useRouter];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["/home/dasein/dev/explore_new/django-nextjs-realtime/frontend/components/auth/signup.tsx"],"names":["useRouter","useRef","useState","useEffect","Head","styles","CustomButton","signUpApiCall","getCookie","SignUp","router","username","password","confirmPassword","first_name","last_name","email","errors","setErrors","is_admin","access_token","push","usernameError","setUserameError","emailError","setEmailError","passwordError","setPasswordError","confirmPasswordError","setConfirmPasswordError","firstNameError","setFirstNameError","lastNameError","setLastNameError","passwordValue","setPasswordValue","confirmPasswordValue","setConfirmPasswordValue","formRef","signUpError","setSignUpError","formHandler","event","target","name","value","tempErrors","length","re","test","replace","sendRegister","preventDefault","formData","FormData","current","userData","Object","fromEntries","res","error","console","log","user","login_card_container","login_header","form_container","login_form","contact_form_error","text_input","input_container","auth_form_error"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useRef, useState, useEffect } from \"react\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport styles from \"../../styles/login.module.scss\";\nimport CustomButton from \"../buttons/button\";\nimport { signUpApiCall } from \"../../service/auth\";\nimport { getCookie } from \"../../service/cookie\";\nimport { RegisterUser } from \"../../models/types\";\n\nconst SignUp: React.SFC<{}> = () => {\n  const router = useRouter();\n  const [errors, setErrors] = useState({\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n  });\n\n  const is_admin = () => {\n    const access_token = getCookie(\"access_token\");\n\n    if (access_token) {\n      router.push(\"/sensors\");\n    }\n  };\n\n  useEffect(() => {\n    is_admin();\n  }, []);\n\n  const [usernameError, setUserameError] = useState(true);\n  const [emailError, setEmailError] = useState(true);\n  const [passwordError, setPasswordError] = useState(true);\n  const [confirmPasswordError, setConfirmPasswordError] = useState(true);\n  const [firstNameError, setFirstNameError] = useState(true);\n  const [lastNameError, setLastNameError] = useState(true);\n\n  const [passwordValue, setPasswordValue] = useState(\"\");\n  const [confirmPasswordValue, setConfirmPasswordValue] = useState(\"\");\n\n  const formRef = useRef(null);\n  const [signUpError, setSignUpError] = useState(null);\n\n  const formHandler = (event) => {\n    const { name, value } = event.target;\n    let tempErrors = errors;\n    switch (name) {\n      case \"username\":\n        tempErrors.username = value.length < 4 ? \"Username is not valid\" : \"\";\n        setUserameError(tempErrors.username.length > 0 ? true : false);\n        break;\n      case \"email\":\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        tempErrors.email = re.test(value) ? \"\" : \"Email is not valid\";\n        setEmailError(tempErrors.email.length > 0 ? true : false);\n        break;\n      case \"password1\":\n        setPasswordValue(value.replace(/\\s/g, \"\"));\n        tempErrors.password =\n          value.length < 8 ? \"Password must be at least 8 characters\" : \"\";\n        setPasswordError(tempErrors.password.length > 0 ? true : false);\n        tempErrors.confirmPassword =\n          confirmPasswordValue === value ? \"\" : \"Passwords do not match\";\n        setConfirmPasswordError(\n          tempErrors.confirmPassword.length > 0 ? true : false\n        );\n        break;\n      case \"password2\":\n        setConfirmPasswordValue(value.replace(/\\s/g, \"\"));\n        tempErrors.confirmPassword =\n          value === passwordValue ? \"\" : \"Passwords do not match\";\n        setConfirmPasswordError(\n          tempErrors.confirmPassword.length > 0 ? true : false\n        );\n        break;\n      case \"first_name\":\n        tempErrors.first_name =\n          value.length < 1 ? \"Please enter your first name\" : \"\";\n        setFirstNameError(tempErrors.first_name.length > 0 ? true : false);\n        break;\n      case \"last_name\":\n        tempErrors.last_name =\n          value.length < 1 ? \"Please enter your last name\" : \"\";\n        setLastNameError(tempErrors.last_name.length > 0 ? true : false);\n        break;\n\n      default:\n        break;\n    }\n    setErrors(tempErrors);\n  };\n\n  const sendRegister = async (event) => {\n    event.preventDefault();\n    setSignUpError(null);\n    const formData = new FormData(formRef.current) as any;\n    const userData = Object.fromEntries(formData) as RegisterUser;\n\n    const res = await signUpApiCall(userData);\n\n    if (res.error) {\n      console.log(res.error);\n      setSignUpError(res.error);\n    } else if (res.user) {\n      router.push(\"/sensors\");\n    }\n  };\n  return (\n    <div>\n      <Head>\n        <title>SignUp</title>\n        <link rel=\"icon\" href=\"/favicon.svg\" />\n      </Head>\n\n      <div className={styles.login_card_container}>\n        <h2 className={styles.login_header}>SignUp</h2>\n\n        <div className={styles.form_container}>\n          <form className={styles.login_form} ref={formRef}>\n            {/* first name*/}\n            <label>First Name</label>\n            <br />\n            <span className={styles.contact_form_error}>\n              {errors.first_name}\n            </span>\n            <input\n              name=\"first_name\"\n              type=\"text\"\n              className={styles.text_input}\n              placeholder=\"First Name\"\n              onChange={formHandler}\n            />\n\n            {/*last name*/}\n            <label>Last Name</label>\n            <br />\n            <span className={styles.contact_form_error}>\n              {errors.last_name}\n            </span>\n            <input\n              name=\"last_name\"\n              type=\"text\"\n              className={styles.text_input}\n              placeholder=\"First Name\"\n              onChange={formHandler}\n            />\n\n            <label>Username</label>\n            <br />\n            <span className={styles.contact_form_error}>{errors.username}</span>\n            <input\n              name=\"username\"\n              type=\"text\"\n              className={styles.text_input}\n              placeholder=\"Username\"\n              onChange={formHandler}\n            />\n\n            {/*email*/}\n            <label>Email</label>\n            <br />\n            <span className={styles.contact_form_error}>{errors.email}</span>\n            <div className={styles.input_container}>\n              <input\n                name=\"email\"\n                type=\"email\"\n                className={styles.text_input}\n                placeholder=\"Email\"\n                onChange={formHandler}\n              />\n            </div>\n\n            {/*password*/}\n            <label>Password</label>\n            <br />\n            <span className={styles.contact_form_error}>{errors.password}</span>\n            <div className={styles.input_container}>\n              <input\n                name=\"password1\"\n                type=\"password\"\n                value={passwordValue}\n                className={styles.text_input}\n                placeholder=\"Password\"\n                onChange={formHandler}\n              />\n            </div>\n\n            {/*confirmpassword*/}\n            <label> Confirm Password</label>\n            <br />\n            <span className={styles.contact_form_error}>\n              {errors.confirmPassword}\n            </span>\n            <div className={styles.input_container}>\n              <input\n                name=\"password2\"\n                type=\"password\"\n                value={confirmPasswordValue}\n                className={styles.text_input}\n                placeholder=\"Password\"\n                onChange={formHandler}\n              />\n            </div>\n\n            <CustomButton\n              fill={true}\n              clickAction={(event) => sendRegister(event)}\n              disabled={\n                usernameError ||\n                emailError ||\n                passwordError ||\n                confirmPasswordError ||\n                firstNameError ||\n                lastNameError\n              }\n            >\n              Sign up\n            </CustomButton>\n\n            {signUpError && (\n              <div className={styles.auth_form_error}>\n                <span> {signUpError} </span>\n              </div>\n            )}\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}